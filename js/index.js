(()=>{"use strict";var t={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return t.d(i,{a:i}),i},d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=p5;var i=t.n(e);const o=Matter;var r,n=t.n(o);class s{constructor({targetWorld:t,x:e,y:i,dx:o=0,dy:r=0,angle:s=0,angularSpeed:a=0,radius:d=10,color:c="#000000"}){this.position={x:0,y:0},this.speed={x:0,y:0},this.position.x=e,this.position.y=i,this.speed.x=o,this.speed.y=r,this.angle=s,this.angularSpeed=a,this.radius=d,this.color=c,this.body=n().Bodies.circle(this.position.x,this.position.y,this.radius,{friction:0,restitution:.95}),this.targetWorld=t}}class a extends s{constructor({targetWorld:t,x:e,y:i,dx:r=0,dy:s=0,angle:a=0,angularSpeed:d=0,radius:c=10,color:l="#000000"}){super({targetWorld:t,x:e,y:i,dx:r,dy:s,angle:a,angularSpeed:d,radius:c,color:l}),this.body=n().Bodies.circle(this.position.x,this.position.y,this.radius,{friction:0,restitution:.95}),o.World.add(this.targetWorld,this.body)}updatePosition(){return this.position.x=this.body.position.x,this.position.y=this.body.position.y,this.angle=this.body.angle,{x:this.position.x,y:this.position.y,angle:this.angle}}}class d extends s{constructor({targetWorld:t,x:e,y:i,dx:r=0,dy:n=0,angle:s=0,angularSpeed:a=0,radius:d=10,color:c="#ffb6c1"}){super({targetWorld:t,x:e,y:i,dx:r,dy:n,angle:s,angularSpeed:a,radius:d,color:c});const l=[o.Vector.create(0,.8*d),o.Vector.create(.4*d,.3*d),o.Vector.create(.7*d,.2*-d),o.Vector.create(.5*d,.7*-d),o.Vector.create(.3*d,.9*-d),o.Vector.create(0,.85*-d),o.Vector.create(.3*-d,.9*-d),o.Vector.create(.5*-d,.7*-d),o.Vector.create(.7*-d,.2*-d),o.Vector.create(.4*-d,.3*d)];this.body=o.Bodies.fromVertices(this.position.x,this.position.y,[l],{friction:1,restitution:0,frictionAir:.03*this.radius,density:.005*this.radius,angle:this.angle,angularVelocity:this.angularSpeed}),o.World.add(this.targetWorld,this.body)}updatePosition(){return this.position.x=this.body.position.x,this.position.y=this.body.position.y,this.angle=this.body.angle,{x:this.position.x,y:this.position.y,angle:this.angle}}}class c{constructor(t,e,i,o){this.canvasWidth=null!=i?i:t.windowWidth,this.canvasHeight=null!=o?o:t.windowHeight,this.targetField=t,this.targetWorld=e}resizeCanvas(t,e){this.canvasWidth=t,this.canvasHeight=e}getTargetField(){return this.targetField}drawParticle(t){if(t instanceof a){const e=this.targetField;e.push(),e.fill(t.color),e.noStroke(),e.circle(t.position.x,t.position.y,2*t.radius),e.pop()}if(t instanceof d){const e=this.targetField,i=t.radius;e.push(),e.fill(t.color),e.noStroke(),e.translate(t.position.x,t.position.y),e.rotate(t.angle),e.beginShape(),e.vertex(0,.8*i),e.bezierVertex(.4*i,.3*i,.7*i,.2*-i,.5*i,.7*-i),e.bezierVertex(.3*i,.9*-i,.1*i,.95*-i,0,.85*-i),e.bezierVertex(.1*-i,.95*-i,.3*-i,.9*-i,.5*-i,.7*-i),e.bezierVertex(.7*-i,.2*-i,.4*-i,.3*i,0,.8*i),e.endShape(e.CLOSE),e.pop()}}}const l=/iP(hone|(o|a)d)/.test(navigator.userAgent);null===(r=document.getElementById("permission"))||void 0===r||r.addEventListener("click",(()=>{const t=DeviceMotionEvent;"function"==typeof t.requestPermission?t.requestPermission().then((t=>{"granted"===t?console.log("Device motion permission granted."):console.warn("Device motion permission denied.")})).catch((t=>{console.error("Error requesting device motion permission:",t)})):console.warn("Device motion permission request not supported.")}));const h={x:0,y:0,z:0};let u=0;window.addEventListener("devicemotion",(t=>{var e,i,o,r,n,s;const a=l?-1:1;t.accelerationIncludingGravity&&(h.x=(null!==(i=null===(e=t.accelerationIncludingGravity)||void 0===e?void 0:e.x)&&void 0!==i?i:0)*a*-1,h.y=(null!==(r=null===(o=t.accelerationIncludingGravity)||void 0===o?void 0:o.y)&&void 0!==r?r:0)*a*-1,h.z=(null!==(s=null===(n=t.accelerationIncludingGravity)||void 0===n?void 0:n.z)&&void 0!==s?s:0)*a*-1)})),new(i())((t=>{const e=o.Engine.create(),i=e.world,r=new c(t,i),n=new Set;let s;t.setup=()=>{t.createCanvas(t.windowWidth,t.windowHeight).parent("#field"),s=o.Bodies.rectangle(t.width/2,t.height-10,t.width,20,{isStatic:!0,friction:.5}),o.World.add(i,s),t.background(255)},t.draw=()=>{t.background(255);const s=1*h.x;if(u=t.lerp(u,s,.1),e.world.gravity.x=u/4,e.world.gravity.y=1,t.fill(0),t.textSize(16),t.text(`X: ${h.x.toFixed(2)}`,10,30),t.text(`Y: ${h.y.toFixed(2)}`,10,50),t.text(`Gravity X: ${u.toFixed(4)}`,10,70),t.frameCount%3==0&&n.size<1e4){let e,o;switch(t.random(["top","left","right"])){case"top":default:e=t.random(-50,t.width+50),o=t.random(-100,-50);break;case"left":e=t.random(-t.width,-50),o=t.random(-50,t.height/2);break;case"right":e=t.random(t.width+50,2*t.width),o=t.random(-50,t.height/2)}n.add(new d({targetWorld:i,x:e,y:o,radius:t.random(5,8),angle:t.random(0,t.TWO_PI),angularSpeed:t.random(-.05,.05),color:t.random(["#ffb6c1","#ffc0cb","#ff69b4"])}))}const a=new Set;for(const e of n){const i=e.updatePosition();-100<=i.y+e.radius&&i.y-e.radius<=t.height?r.drawParticle(e):a.add(e)}for(const t of a)n.delete(t),o.World.remove(i,t.body);o.Engine.update(e,1e3/60)},t.mouseClicked=()=>{}}))})();